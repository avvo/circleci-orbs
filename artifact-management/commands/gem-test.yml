description: Perform simple gem test
parameters:
  gem_test_dir:
    description: The directory in which the gem tesets should run
    type: string
    default: .
  test_command:
    default: bundle exec rake test
    description: The command that should be used to run tests
    type: string
steps:
  - setup-gem-environment
  - gem-test-common-steps
  - run:
      name: bundle install
      command: |-
        cd <<parameters.gem_test_dir>>
        bundle install
  - run:
      name: Run tests
      command: |-
        cd <<parameters.gem_test_dir>>
        <<parameters.test_command>>
  - teardown-gem-environment
